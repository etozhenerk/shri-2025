# Тест-кейсы для страницы "CSV Аналитик" (HomePage)

### ID: TC-HP-001

**Название:** Успешная загрузка и обработка CSV файла через кнопку "Загрузить файл".
**Тип теста:** Функциональный (E2E)
**Описание:** Проверка полного цикла успешной загрузки файла через клик по кнопке, отправки на обработку и отображения результатов.
**Предусловие:** Пользователь находится на странице "Главная" (`/`). Ответ от сервера с результатами замокан.
**Шаги:**

1.  **Шаг:** Нажать на кнопку "Загрузить файл" или на область для загрузки.
    **Ожидаемый результат:** Открывается системное окно выбора файла.
2.  **Шаг:** В системном окне выбора файла выбрать валидный `.csv` файл.
    **Ожидаемый результат:** Имя выбранного файла отображается в области загрузки. Кнопка "Отправить" становится видимой и активной.
3.  **Шаг:** Нажать кнопку "Отправить".
    **Ожидаемый результат:** Отображается индикатор процесса обработки. После завершения индикатор пропадает, а на странице отображаются карточки с результатами. В историю добавляется запись об успешной обработке.

### ID: TC-HP-002

**Название:** Успешная загрузка и обработка CSV файла через Drag-and-Drop.
**Тип теста:** Функциональный (E2E)
**Описание:** Проверка полного цикла успешной загрузки файла через перетаскивание, отправки на обработку и отображения результатов.
**Предусловие:** Пользователь находится на странице "Главная" (`/`). Ответ от сервера с результатами замокан.
**Шаги:**

1.  **Шаг:** Перетащить валидный `.csv` файл из файловой системы компьютера в область Dropzone на странице.
    **Ожидаемый результат:** Имя выбранного файла отображается в области загрузки. Кнопка "Отправить" становится видимой и активной.
2.  **Шаг:** Нажать кнопку "Отправить".
    **Ожидаемый результат:** Отображается индикатор процесса обработки. После завершения индикатор пропадает, а на странице отображаются карточки с результатами. В историю добавляется запись об успешной обработке.

### ID: TC-HP-003

**Название:** Попытка загрузки файла с неверным расширением.
**Тип теста:** Интеграционный (Integration)
**Описание:** Проверка реакции системы на попытку загрузить файл в формате, отличном от CSV.
**Предусловие:** Пользователь находится на странице "Главная" (`/`).
**Шаги:**

1.  **Шаг:** Нажать на кнопку "Загрузить файл" и выбрать файл с расширением, отличным от `.csv` (например, `test.txt`).
    **Ожидаемый результат:** В области загрузки отображается сообщение об ошибке, указывающее на неверный формат файла. Кнопка "Отправить" неактивна или невидима.

### ID: TC-HP-004

**Название:** Кнопка "Отправить" неактивна до выбора файла.
**Тип теста:** Интеграционный (Integration)
**Описание:** Проверка того, что пользователь не может инициировать обработку, не выбрав файл.
**Предусловие:** Пользователь находится на странице "Главная" (`/`).
**Шаги:**

1.  **Шаг:** Осмотреть страницу сразу после загрузки.
    **Ожидаемый результат:** Кнопка "Отправить" не видна на странице.

### ID: TC-HP-005

**Название:** Отображение ошибки при сбое обработки на сервере.
**Тип теста:** Интеграционный (Integration)
**Описание:** Проверка корректного отображения серверной ошибки на стороне клиента.
**Предусловие:** Пользователь находится на странице "Главная" (`/`). Ответ от сервера с ошибкой замокан.
**Шаги:**

1.  **Шаг:** Выбрать валидный `.csv` файл и нажать "Отправить".
    **Ожидаемый результат:** Индикатор процесса обработки пропадает. На странице отображается сообщение об ошибке, полученное от сервера. В историю добавляется запись о неудачной обработке.

### ID: TC-HP-006

**Название:** Сброс выбранного файла.
**Тип теста:** Интеграционный (Integration)
**Описание:** Проверка функциональности отмены выбора файла до отправки на обработку.
**Предусловие:** Пользователь находится на странице "Главная" (`/`).
**Шаги:**

1.  **Шаг:** Выбрать валидный `.csv` файл.
    **Ожидаемый результат:** Имя файла отображается в области загрузки.
2.  **Шаг:** Нажать на иконку "очистить" (крестик) рядом с именем файла.
    **Ожидаемый результат:** Область загрузки возвращается в исходное состояние. Кнопка "Отправить" исчезает.

### ID: TC-HP-007

**Название:** Скриншот секции загрузки файла в состоянии по умолчанию.
**Тип теста:** Скриншотный (Screenshot)
**Описание:** Проверка внешнего вида секции загрузки до любых действий пользователя.
**Предусловие:** Пользователь находится на странице "Главная" (`/`).
**Шаги:**

1.  **Шаг 1:** Сделать и сравнить скриншот секции загрузки файла.
    **Ожидаемый результат:** Внешний вид секции должен полностью совпадать с эталонным снимком `home-page-upload-section-default.png`.

### ID: TC-HP-008

**Название:** Скриншот секции с результатами после успешной обработки.
**Тип теста:** Скриншотный (Screenshot)
**Описание:** Проверка внешнего вида секции с "хайлайтами" после успешной загрузки файла.
**Предусловие:** Пользователь находится на странице "Главная" (`/`). Ответ от сервера с результатами замокан.
**Шаги:**

1.  **Шаг 1:** Загрузить валидный `.csv` файл и дождаться отображения результатов.
2.  **Шаг 2:** Сделать и сравнить скриншот секции с результатами.
    **Ожидаемый результат:** Внешний вид секции с карточками результатов должен совпадать с эталонным снимком `home-page-highlights-section-success.png`.

### ID: TC-HP-009

**Название:** Скриншот секции загрузки файла с ошибкой обработки.
**Тип теста:** Скриншотный (Screenshot)
**Описание:** Проверка внешнего вида секции загрузки файла после неудачной попытки обработки.
**Предусловие:** Пользователь находится на странице "Главная" (`/`). Ответ от сервера с ошибкой замокан.
**Шаги:**

1.  **Шаг 1:** Загрузить валидный `.csv` файл и дождаться отображения ошибки.
2.  **Шаг 2:** Сделать и сравнить скриншот секции загрузки файла.
    **Ожидаемый результат:** Внешний вид секции с сообщением об ошибке должен совпадать с эталонным снимком `home-page-upload-section-error.png`.

### ID: TC-HP-010

**Название:** Скриншот секции загрузки файла с выбранным файлом до отправки.
**Тип теста:** Скриншотный (Screenshot)
**Описание:** Проверка внешнего вида секции загрузки после выбора файла, но до его отправки.
**Предусловие:** Пользователь находится на странице "Главная" (`/`).
**Шаги:**

1.  **Шаг 1:** Загрузить валидный `.csv` файл.
    **Ожидаемый результат:** Имя файла отображается в области загрузки. Кнопка "Отправить" видима.
2.  **Шаг 2:** Сделать и сравнить скриншот секции загрузки файла.
    **Ожидаемый результат:** Внешний вид секции должен совпадать с эталонным снимком `home-page-upload-section-with-file.png`.

### ID: TC-HP-011

**Название:** Скриншот секции загрузки файла в процессе обработки.
**Тип теста:** Скриншотный (Screenshot)
**Описание:** Проверка внешнего вида секции загрузки во время обработки файла.
**Предусловие:** Пользователь находится на странице "Главная" (`/`). Ответ от сервера намеренно задержан.
**Шаги:**

1.  **Шаг 1:** Загрузить валидный `.csv` файл и начать обработку.
    **Ожидаемый результат:** Отображается индикатор загрузки.
2.  **Шаг 2:** Сделать и сравнить скриншот секции загрузки файла.
    **Ожидаемый результат:** Внешний вид секции с индикатором загрузки должен совпадать с эталонным снимком `home-page-upload-section-loading.png`.

### ID: TC-HP-012

**Название:** Скриншот секции загрузки файла с ошибкой формата.
**Тип теста:** Скриншотный (Screenshot)
**Описание:** Проверка внешнего вида секции загрузки при попытке загрузить файл неверного формата.
**Предусловие:** Пользователь находится на странице "Главная" (`/`).
**Шаги:**

1.  **Шаг 1:** Загрузить файл неверного формата (например, `.txt`).
    **Ожидаемый результат:** Отображается сообщение об ошибке формата файла.
2.  **Шаг 2:** Сделать и сравнить скриншот секции загрузки файла.
    **Ожидаемый результат:** Внешний вид секции с сообщением об ошибке формата должен совпадать с эталонным снимком `home-page-upload-section-invalid-format.png`.

### ID: TC-HP-013

**Название:** Скриншот состояния страницы с плейсхолдером для хайлайтов
**Тип теста:** Скриншот-тестирование (Playwright)
**Описание:** Проверяет корректность отображения плейсхолдера в секции результатов, когда анализ еще не был произведен.
**Предусловие:** Пользователь впервые открыл главную страницу. История анализов пуста.
**Шаги:**

1.  **Шаг 1:** Открыть главную страницу (`/`).
    **Ожидаемый результат:** На странице виден плейсхолдер для хайлайтов.
2.  **Шаг 2:** Сделать скриншот плейсхолдера.
    **Ожидаемый результат:** Внешний вид плейсхолдера должен совпадать с эталонным снимком `home-page-highlights-section-placeholder.png`.
