# Тестовые сценарии для страницы "CSV Аналитик" (HomePage)

## Основные сценарии

### Сценарий 1: Успешная загрузка и обработка файла через "выбор файла"

**Описание:** Пользователь успешно загружает CSV файл, нажав на кнопку выбора файла, отправляет его на обработку и видит результаты.

**Шаги:**

1.  Пользователь открывает главную страницу.
2.  Нажимает на кнопку "Загрузить файл" в области Dropzone.
3.  Выбирает корректный CSV файл в диалоговом окне.
4.  Имя файла отображается в Dropzone.
5.  Кнопка "Отправить" становится активной.
6.  Пользователь нажимает "Отправить".
7.  На время обработки данных отображается лоадер.
8.  После успешного завершения обработки лоадер исчезает, и на странице появляются карточки с результатами обработки ("хайлайты").
9.  Запись об успешной обработке добавляется в историю.

### Сценарий 2: Успешная загрузка и обработка файла через Drag-and-Drop

**Описание:** Пользователь успешно загружает CSV файл, перетащив его в специальную область, отправляет на обработку и видит результаты.

**Шаги:**

1.  Пользователь открывает главную страницу.
2.  Перетаскивает корректный CSV файл со своего компьютера в область Dropzone.
3.  Имя файла отображается в Dropzone.
4.  Кнопка "Отправить" становится активной.
5.  Пользователь нажимает "Отправить".
6.  На время обработки данных отображается лоадер.
7.  После успешного завершения обработки лоадер исчезает, и на странице появляются карточки с результатами обработки ("хайлайты").
8.  Запись об успешной обработке добавляется в историю.

### Сценарий 3: Попытка загрузки файла неверного формата

**Описание:** Пользователь пытается загрузить файл в формате, отличном от CSV.

**Шаги:**

1.  Пользователь открывает главную страницу.
2.  Нажимает на кнопку "Загрузить файл".
3.  Выбирает файл с расширением, отличным от `.csv` (например, `.txt`, `.png`).
4.  Система должна показать сообщение об ошибке, что формат файла не поддерживается.
5.  Кнопка "Отправить" должна оставаться неактивной.

### Сценарий 4: Попытка отправить форму без файла

**Описание:** Пользователь пытается инициировать обработку, не выбрав файл.

**Шаги:**

1.  Пользователь открывает главную страницу.
2.  Кнопка "Отправить" не видна или неактивна.
3.  Пользователь не может инициировать отправку.

### Сценарий 5: Ошибка на стороне сервера во время обработки

**Описание:** Пользователь загружает корректный CSV файл, но во время обработки на сервере происходит ошибка.

**Шаги:**

1.  Пользователь выбирает корректный CSV файл.
2.  Нажимает "Отправить".
3.  В процессе обработки сервер возвращает ошибку.
4.  На странице отображается сообщение об ошибке.
5.  Лоадер исчезает.
6.  Запись о неудачной обработке добавляется в историю.

### Сценарий 6: Очистка выбранного файла

**Описание:** Пользователь выбрал файл, но решил его отменить.

**Шаги:**

1.  Пользователь выбирает CSV файл.
2.  Имя файла отображается в Dropzone.
3.  Рядом с именем файла есть иконка для удаления/очистки.
4.  Пользователь нажимает на иконку.
5.  Выбранный файл сбрасывается, Dropzone возвращается в исходное состояние.
6.  Кнопка "Отправить" становится невидимой/неактивной.

### Сценарий 7: Отображение страницы в состоянии по умолчанию

**Описание:** Проверка внешнего вида главной страницы до каких-либо действий пользователя.

**Шаги:**
1. Пользователь открывает главную страницу (`/`).
2. **Результат:** Внешний вид страницы должен полностью совпадать с эталонным снимком `home-page-default.png`.

### Сценарий 8: Отображение страницы с результатами обработки

**Описание:** Проверка внешнего вида главной страницы после успешной загрузки файла и отображения результатов.

**Предусловия:**
- Мок API для обработки файла настроен на успешный ответ.

**Шаги:**
1. Пользователь открывает главную страницу.
2. Загружает валидный файл (`test-data.csv`).
3. Дожидается появления карточек с результатами обработки.
4. **Результат:** Внешний вид страницы должен совпадать с эталонным снимком `home-page-with-highlights.png`.

### Сценарий 9: Отображение страницы с ошибкой обработки

**Описание:** Проверка внешнего вида главной страницы после неудачной попытки обработки файла.

**Предусловия:**
- Мок API для обработки файла настроен на ответ с ошибкой.

**Шаги:**
1. Пользователь открывает главную страницу.
2. Загружает валидный файл (`test-data.csv`).
3. Дожидается появления сообщения об ошибке.
4. **Результат:** Внешний вид страницы с сообщением об ошибке должен совпадать с эталонным снимком `home-page-upload-error.png`.

### Сценарий 10: Отображение страницы с выбранным файлом

**Описание:** Проверка внешнего вида главной страницы после выбора файла, но до его отправки.

**Шаги:**
1. Пользователь открывает главную страницу.
2. Загружает валидный файл (`test-data.csv`).
3. **Результат:** Внешний вид страницы с выбранным файлом должен совпадать с эталонным снимком `home-page-upload-section-with-file.png`.

### Сценарий 11: Отображение страницы в процессе загрузки

**Описание:** Проверка внешнего вида главной страницы во время обработки файла.

**Предусловия:**
- Мок API для обработки файла настроен на задержку ответа.

**Шаги:**
1. Пользователь открывает главную страницу.
2. Загружает валидный файл (`test-data.csv`).
3. Нажимает кнопку "Отправить".
4. **Результат:** Внешний вид страницы с индикатором загрузки должен совпадать с эталонным снимком `home-page-upload-section-loading.png`.

### Сценарий 12: Отображение страницы с ошибкой формата файла

**Описание:** Проверка внешнего вида главной страницы при попытке загрузить файл неверного формата.

**Шаги:**
1. Пользователь открывает главную страницу.
2. Пытается загрузить файл неверного формата (`invalid-file.txt`).
3. **Результат:** Внешний вид страницы с сообщением об ошибке формата должен совпадать с эталонным снимком `home-page-upload-section-invalid-format.png`.

### Сценарий 13: Отображение плейсхолдера для результатов анализа
**Описание:** Пользователь заходит на главную страницу впервые и видит начальное состояние секции с результатами, когда еще не было загружено ни одного файла.
**Шаги:**
1. Открыть главную страницу.
2. Убедиться, что в секции для хайлайтов отображается текст-заполнитель, и его внешний вид соответствует скриншоту `home-page-highlights-section-placeholder.png`.
