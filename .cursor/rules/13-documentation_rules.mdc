---
description: "Правила документирования тестов: Documentation-First процесс, форматы сценариев и тест-кейсов"
globs: "docs/*"
alwaysApply: false
---
# Правила документирования тестов

## Обязательные стандарты (MUST)

- **Основа на документации**: **MUST** базировать все E2E-тесты на сценариях и тест-кейсах, задокументированных в `docs/tests/`.

- **Связь с кодом**: **MUST** связывать E2E-тесты с их тест-кейсами с помощью JSDoc-комментария в тестовом файле. Пример: `/** @description Тест-кейс: TC-A11Y-HP-001 */`.

- **Формат сценариев**: **MUST** писать сценарии (в `docs/tests/scenarios/`) в формате, основанном на заголовках `### Сценарий N: Название`, за которыми следуют `**Описание:**` и `**Шаги:**` с нумерованным списком.

- **Формат тест-кейсов**: **MUST** писать тест-кейсы (в `docs/tests/test-cases/`) в строгой структуре с полями: `### ID: TC-...`, `**Название:**`, `**Тип теста:**`, `**Описание:**`, `**Предусловие:**` и `**Шаги:**`. Каждый шаг должен быть детализирован с `**Ожидаемый результат:**`.

- **Язык**: **MUST** писать всю тестовую документацию на русском языке.

- **Процесс Documentation-First**: **MUST** следовать строгому процессу:
  1. **Написание сценария**: Создать пользовательский сценарий в `docs/tests/scenarios/[page-name].md`
  2. **Детализация тест-кейса**: Создать формальный тест-кейс в `docs/tests/test-cases/[page-name].md`
  3. **Утверждение документации**: Получить одобрение тест-кейса перед написанием кода
  4. **Написание кода**: Реализовать автотест с соответствующим именованием

- **Исключения**: **MUST NOT** применять Documentation-First процесс к UI-снэпшот тестам из пакета `@shri/ui-kit`. Для них достаточно описательных названий на русском языке.

## Примеры

### Связь теста с документацией

```typescript
/**
 * @description Тест-кейс: TC-HP-001
 * @see docs/tests/test-cases/home-page.md
 */
test('TC-HP-001: Успешная загрузка и отображение CSV файла', async ({ pages, actions }) => {
  // ...
});
```

### Формат сценария

```markdown
### Сценарий 1: Загрузка файла
**Описание:** Пользователь загружает CSV файл для анализа
**Шаги:**
1. Открыть домашнюю страницу
2. Выбрать файл через drag-and-drop
3. Убедиться, что файл отображается
```

### Формат тест-кейса

```markdown
### ID: TC-HP-001
**Название:** Успешная загрузка CSV файла
**Тип теста:** E2E
**Описание:** Проверка загрузки валидного CSV файла
**Предусловие:** Пользователь находится на странице "Домашняя" ('/')
**Шаги:**
1. **Действие:** Загрузить файл test-data.csv
   **Ожидаемый результат:** Файл отображается в интерфейсе
```
