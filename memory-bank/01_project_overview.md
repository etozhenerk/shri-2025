# 1. Обзор проекта

## Основная цель
Разработка фронтенд-части для **Сервиса межгалактической аналитики**. Приложение позволяет пользователям загружать CSV-файлы, получать по ним аналитические данные, отслеживать прогресс обработки и просматривать историю своих загрузок.

## Стек технологий
- **Фреймворк:** React (`v18.2.0`)
- **Язык:** TypeScript (`v5.2.2`)
- **Сборщик:** Vite (`v5.1.6`)
- **Управление состоянием:** Zustand (`v4.5.2`). Для отладки через Redux DevTools используется пакет `@redux-devtools/extension`.
- **Роутинг:** `react-router-dom` (`v6.22.3`)
- **Стилизация:** CSS Modules
- **Тестирование:**
    -   **Интеграционные и юнит-тесты:** Vitest (`v1.4.0`) + React Testing Library (`v14.0.0`)
    -   **E2E и скриншотные тесты:** Playwright (`v1.42.1`)
- **Линтинг и форматирование:** ESLint + Prettier

## Архитектура: Монорепозиторий

Проект построен по принципу **монорепозитория** с использованием `npm workspaces`. Эта архитектура разделяет основное приложение, переиспользуемую библиотеку UI-компонентов и утилиты для тестирования.

### 1. Основное приложение (`/`)

-   **Ответственность:** Является контейнером для всего приложения. Здесь сосредоточена бизнес-логика, интеграция компонентов, страницы (`src/pages`), сложные компоненты (`src/components`) и управление состоянием (`src/store`).

### 2. Пакет `@shri/ui-kit` (`packages/ui-kit`)

-   **Ответственность:** Предоставляет набор изолированных, переиспользуемых UI-компонентов (кнопки, иконки, модальные окна и т.д.).
-   **Инкапсуляция:** Внутри пакета находятся не только сами компоненты, но и всё, что необходимо для их разработки и тестирования:
    -   **Storybook**: Конфигурация и "истории" для визуальной разработки.
    -   **UI-тесты**: Снэпшот-тесты Playwright для визуального регрессионного тестирования.

### 3. Пакет `@shri/playwright` (`packages/playwright`)

-   **Ответственность:** Предоставляет единую точку входа и набор утилит (Page Objects, Actions, Mocker) для написания Playwright-тестов.
-   **Ключевая особенность:** Экспортирует кастомный объект `test`, который автоматически предоставляет всем тестам доступ к утилитам через параметры теста, делая тесты чище и проще в поддержке.

## Прочие архитектурные заметки
- **State Management:** Состояние управляется с помощью Zustand. Код состояния организован по принципу "фича-слайсов" (например, `analysis`, `history`), имитируя подход Redux Toolkit для лучшей структурированности.
- **Хранение данных:** История загрузок сохраняется в `LocalStorage` для персистентности между сессиями.
- **Модальные окна:** Реализованы через React Portals для корректного отображения в DOM.
- **Асинхронные запросы:** Используется нативный `fetch` API для взаимодействия с бэкендом.
